<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="mybatis.AdminUser">
	<select id="AdminUserInfoList" parameterType="java.util.Map" resultType="AdminUserDTO">
		select * from
		(select a.*, rownum r from
			(select * from member m join liked_tour lt on lt.id =
				m.id join content c on c.contentid = lt.contentid)a)
		where r between 1 and 100
		ORDER BY regidate
	</select>
	
	<select id="SelectPlannerList" parameterType="java.util.Map" resultType="AdminUserDTO">
		select * from member m join planner p on m.id=m.id
		order by view_count 
	</select>
	
	<select id="SelectReviewList" parameterType="java.util.Map" resultType="AdminUserDTO">
		select * from member m join liked_review lr on m.id=lr.id 
		join review r on r.review_id = lr.review_id
		order by view_count
	</select>
	
	
	<delete id="AdminUserInfoDelete" parameterType="java.util.Map">
		DELETE member WHERE id=#{id}
	</delete>
	
	<select id="AdminUserReservationList" resultType="AdminReservationDTO">
		SELECT r.*, m.id as id, pp.roomtitle as roomtitle, pp.p_id as p_id
		 FROM planner p, member m, reservation r, p_product pp WHERE p.id=m.id
		 AND p.planner_id=r.planner_id AND r.roomcode=pp.roomcode
	</select>
	
	<select id="AdminUserPlannerList">
			
	</select>
	
	<select id="getTotal" parameterType="java.util.Map" resultType="int">
		select count(*) from member
       
	</select>
	
	

</mapper>